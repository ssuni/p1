<script language="javascript" xmlns="http://www.w3.org/1999/html">
				function fnEdit(p_nIdx){
					var f_oForm	= document.forms["frmMain"];
					f_oForm.tNum.value	= p_nIdx;
					f_oForm.act.value	= "modify";
					f_oForm.action			= "<?=$PHP_SELF?>";
					f_oForm.submit();
				}

				function fnChkVal(p_oForm){
					p_oForm.method		= "post";
					p_oForm.proc.value	= "search";
					p_oForm.submit();
				}
				function fnChkAll(p_oBox) {
					var f_oBox	= document.getElementsByName("chk[]");
					var f_nCnt	= f_oBox.length;
					var f_bChk	= false;
					if (p_oBox.checked==true)
					{
						f_bChk	= true;
					}
					for (i=0; i < f_nCnt; i++)
					{
						f_oBox[i].checked	= f_bChk;
					}
				}
				function fnChkItem(p_oBox) {
					var f_oBox	= document.getElementsByName("chk[]");
					var f_nCnt	= f_oBox.length;
					var f_bChk	= true;
					for ( i = 0; i < f_nCnt ; i++)
					{
						if ( f_oBox[i].checked == false ){
							f_bChk	= false;
						}
					}
					p_oBox.checked	= f_bChk;
				}
				function fnChkBox() {
					var f_oBox	= document.getElementsByName("chk[]");
					var f_nCnt	= f_oBox.length;
					var f_nChk	= 0;
					var f_bChk	= false;
					for ( i = 0; i < f_nCnt ; i++)
					{
						if ( f_oBox[i].checked == true ){
							f_bChk	= true;
							f_nChk++;
						}
					}
					return f_nChk;
				}

				function fnDelData(){
					var f_oForm	= document.forms['frmMain'];
					var f_nCnt	= fnChkBox();
					if ( f_nCnt == 0 ){
						alert('선택된 목록이 없습니다.');
						return;
					}
					if ( confirm("삭제한 목록은 복구가 불가능합니다.. \n총 " + f_nCnt + " 개의 목록을 삭제합니다.") ) { 
						f_oForm.act.value = "del_ok";
						f_oForm.submit();
					}
				}

				function fnSendMail(p_sNum){
					window.open("_pop_mail.html?receiver="+p_sNum,"sendmail","width=600,height=490");
				}

				function fnSendSMS(p_sNum){
					window.open("_pop_sms.html?receiver="+p_sNum,"sendsms","width=146,height=287");
				}
			</script>

<style>
	/**************************
  DEFAULT BOOTSTRAP STYLES
**************************/

	.btn {
		display: inline-block;
		/*padding: 6px 12px;*/
		margin-bottom: 0;
		font-size: 12px;
		font-weight: normal;
		line-height: 1.42857143;
		text-align: center;
		white-space: nowrap;
		vertical-align: middle;
		cursor: pointer;
		-webkit-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
		background-image: none;
		border: 1px solid transparent;
		border-radius: 4px;
		/*padding: 1px 16px;*/
	}

	.btn-lg {
		font-size: 10px;
		line-height: 1.33;
		border-radius: 6px;
	}

	.btn-primary {
		color: #fff;
		background-color: #428bca;
		border-color: #357ebd;
	}

	.btn-primary:hover,
	.btn-primary:focus,
	.btn-primary:active,
	.btn-primary.active,
	.open .dropdown-toggle.btn-primary {
		color: #fff;
		background-color: #3276b1;
		border-color: #285e8e;
	}

	/***********************
      SHARP BUTTONS
    ************************/
	.sharp {
		border-radius:0;
	}

	/***********************
      CUSTON BTN VALUES
    ************************/

	.btn {
		padding: 10px 24px;
		border: 0 none;
		font-weight: 700;
		letter-spacing: 1px;
		text-transform: uppercase;
	}
	.btn:focus, .btn:active:focus, .btn.active:focus {
		outline: 0 none;
	}

	.btn-primary {
		background: #0099cc;
		color: #ffffff;
	}
	.btn-primary:hover, .btn-primary:focus, .btn-primary:active, .btn-primary.active, .open > .dropdown-toggle.btn-primary {
		background: #33a6cc;
	}
	.btn-primary:active, .btn-primary.active {
		background: #007299;
		box-shadow: none;
	}
	.ta6 {
		border: 3px double #CCCCCC;
		width: 230px;
		height: 60px;
	}

	 table.type09 {
		 border-collapse: collapse;
		 text-align: left;
		 line-height: 1.5;

	 }
	table.type09 thead th {
		padding: 10px;
		font-weight: bold;
		vertical-align: top;
		color: #369;
		border-bottom: 3px solid #036;
	}
	table.type09 tbody th {
		width: 150px;
		padding: 10px;
		font-weight: bold;
		vertical-align: top;
		border-bottom: 1px solid #ccc;
		background: #f3f6f7;
	}
	table.type09 td {
		width: 90%;
		padding: 10px;
		vertical-align: top;
		border-bottom: 1px solid #ccc;
	}

</style>

<script>
$(document).ready(function() {
	var inst = $('[data-remodal-id=modal]').remodal();

	$( window ).bind('beforeunload', function()
	{

		inst.destroy();
	});
	var table = $('#example').DataTable({
		fixedHeader: {
			header: false,
			footer: true
		},
		"autoWidth": false,

		processing: true,
		serverSide: true,
		ajax:{
			url :"/admin/proc/board_online_counsel_json.php", // json datasource
			type: "post"  // method  , by default get
//			error: function(){  // error handling
//				$(".employee-grid-error").html("");
//				$("#employee-grid").append('<tbody class="employee-grid-error"><tr><th colspan="3">No data found in the server</th></tr></tbody>');
//				$("#employee-grid_processing").css("display","none");
//
//			}
		},



//		scrollY:     300,
//		scroller:    true,
//		iDisplayLength: 15,
		language: {
			"search": "검색",
			"lengthMenu": "정렬수 _MENU_ ",
			"zeroRecords": "검색 결과가 없습니다.",
			"info": "현재페이지: _START_ ~ _END_  전체결과:_TOTAL_ 개",
			"infoEmpty":      "검색결과: 0 개",
			"infoFiltered": " 총 데이터 _MAX_ 개"
	       },
		pagingType: "full_numbers",
		lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
		columnDefs: [ {
			orderable: false,
			className: 'select-checkbox',
			targets:   0
		} ],

		columnDefs: [{
			'targets': 0,
			'searchable':false,
			'orderable':false,
			'className': 'dt-body-center',
			'render': function (data, type, full, meta){
				return '<input type="checkbox" name="id[]" value="' + $('<div/>').text(data).html() + '">';
			}
		}],
		order: [[ 5, 'desc' ]]


	});

//	table
//			.order( [ 4, 'desc' ] )
//			.draw();

//	$('#example tbody').on('click', 'tr', function () {
//		var data = table.row( this ).data();
//		alert( 'You clicked on '+data[0]+'\'s row' );
//	} );


	$('#example tbody').on( 'click', 'tr', function () {
		if ( $(this).hasClass('selected') ) {
			$(this).removeClass('selected');
		}
		else {
			table.$('tr.selected').removeClass('selected');
			$(this).addClass('selected');
//			console.log($(this).data('value'))
//			console.log($(this)[0])
			var obj =$(this).find('input');
			console.log(obj.is(':checked'))
//			obj.prop('checked', !obj.is(':checked'));
			if(obj.is(':checked') == false) {
//				$(location).attr('href','<?=$PHP_SELF?>?act=modify&tNum='+$(this).data('value'))
			}
		}
	} );


	$('#example tbody').on('dblclick', 'tr', function (event) {
		
		var data = table.row( this ).data();
		var obj =$(this).find('input');

		if(event.target.type !== 'checkbox') {
			$("#popuptbody").empty()
			$(".ta6").val("")

//		alert( 'You clicked on '+data[0]+'\'s row' );
			inst.open();
			var html = ""
			var boardtype = "online"
			var idx = data[0]
			$.post("/admin/proc/boardAjax.php", {
				'type': 'list',
				'boardtype': boardtype,
				'idx': idx
			}, function (response) {
				var result = JSON.parse(response)
				console.log(result)
				html += "<tr>"
				html += "<th scope='row'>분류</th>"
				html += "<td>" + result['fid'] + "</td>"
				html += "<input type='hidden' id='hiddenIdx' value='" + result['idx'] + "'/>"
				html += "</tr>"
				html += "<tr>"
				html += "<th scope='row'>실명</th>"
				html += "<td>" + result['name'] + "</td>"
				html += "</tr>"
				html += "<tr>"
				html += "<th scope='row'>연락처</th>"
				html += "<td>" + result['mobile'] + "</td>"
				html += "</tr>"
				html += "<tr>"
				html += "<th scope='row'>작성일</th>"
				html += "<td>" + result['date'] + "</td>"
				html += "</tr>"
				html += "<tr>"
				html += "<th scope='row'>조회수</th>"
				html += "<td>" + result['count'] + "</td>"
				html += "</tr>"
				html += "<tr>"
				html += "<th scope='row'>글제목</th>"
				html += "<td>" + result['subject'] + "</td>"
				html += "</tr>"
				html += "<tr>"
				html += "<th scope='row'>상담내용</th>"
				html += "<td>" + result['comment'] + "</td>"
				html += "</tr>"
				if (result['reply']) {
					$(".ta6").val(result['reply'].replace(/(<([^>]+)>)/gi, "").replace(/&nbsp;/gi, ''))
				}
				$("#popuptbody").append(html)
			});
		}
		$(".ta6").focus()

	} );

	// Handle click on "Select all" control
	$('#example-select-all').on('click', function(){
		// Check/uncheck all checkboxes in the table
		var rows = table.rows({ page: 'current'}).nodes();
		console.log(rows.length)
		$('input[type="checkbox"]', rows).prop('checked', this.checked);
	});
	$('#example tbody').on('change', 'input[type="checkbox"]', function(){
		// If checkbox is not checked
		if(!this.checked){
			var el = $('#example-select-all').get(0);
			// If "Select all" control is checked and has 'indeterminate' property
			if(el && el.checked && ('indeterminate' in el)){
				// Set visual state of "Select all" control
				// as 'indeterminate'
				el.indeterminate = true;
			}
		}
	});
	$('#button').click( function () {
		table.$('input[type="checkbox"]').each(function(){
			// If checkbox doesn't exist in DOM

				// If checkbox is checked
				if(this.checked){
					// Create a hidden element
					console.log(this.value)

				}

		});

//		var data = table
//				.rows()
//				.data();
//		console.log(data)
//
//		alert( 'The table has '+data.length+' records' );
//		table.row('.selected').remove().draw( false );
	} );
	$('#example').on( 'page.dt',   function () {
		if($('#example-select-all').is(":checked") == true){
			$('#example-select-all').prop('checked',false)
		}
//			alert('paging click')
	}).DataTable();

	//온라인상담 답변
	$(".remodal-confirm").on('click',function(){
		var idx = $("#hiddenIdx").val();
		var content = $(".ta6").val();
		if(content == "") {
			alert('답변내용이 없습니다.')
		}else {
			$.post('/admin/proc/boardAjax.php', {'type': 'reply', 'idx': idx, 'reply': content}, function (response) {
				var result = JSON.parse(response)
				console.log(result)
			})//답변내용ajax
		}
	})
	$('textarea').keypress(function(event) {
		if (event.which == 13) {
			event.preventDefault();
			var s = $(this).val();
			$(this).val(s+"\n");
		}
	});
} );

</script>

<!--팝업폼-->
<div class="remodal" data-remodal-id="modal"
	 data-remodal-options="hashTracking: false, closeOnOutsideClick: false">
	<button data-remodal-action="close" class="remodal-close"></button>
	<h1><span id="subject"></span></h1>
	<table class="type09">
		<thead>
			<tr>
				<th scope="cols"></th>
				<th scope="cols"></th>
			</tr>
		</thead>
		<tbody id="popuptbody">

		</tbody>
	</table>
	<table class="type09">
		<thead>
			<tr>
				<th scope="cols"></th>
				<th scope="cols"></th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<th scope='row'>답변자</th>
				<td>관리자</td>
			</tr>
			<tr>
				<th scope='row'>답변내용</th>
				<td><textarea class="ta6" style="height:180px;width:380px;"></textarea></td>
			</tr>
			<!--<tr>-->
				<!--<th scope='row'>발송</th>-->
				<!--<td><input type="checkbox"/> 답변시 메일발송 <input type="checkbox"/> 답변시 문자발송</td>-->
			<!--</tr>-->
		</tbody>
	</table>

	<br>
	<button data-remodal-action="cancel" class="remodal-cancel">닫기</button>
	<button data-remodal-action="confirm" class="remodal-confirm">저장</button>
</div>
<!--팝업폼-->

<table id="example" class="display" cellspacing="0" width="100%">
	<thead>
	<tr>
		<th><input type="checkbox" name="select_all" value="1" id="example-select-all"></th>
		<th>번호</th>
		<th>글제목</th>
		<th>처리현황</th>
		<th>글쓴이</th>
		<th>작성일</th>
		<th>지점</th>

	</tr>
	</thead>

</table>
<button type="button" class="btn btn-primary sharp" id="button">삭제</button>


			<!--<table width="99%" border="0" cellspacing="0" cellpadding="0">-->
<!--<form name="frmMain" method="post" action="<?=$PHP_SELF?>">-->
<!--<input type="hidden" name="step" value="next">-->
<!--<input type="hidden" name="act" value="">-->
<!--<input type="hidden" name="tNum" value="">-->
				<!--<tr>-->
					<!--<td height="12" colspan="3"></td>-->
				<!--</tr>-->
				<!--<tr>-->
					<!--<td width="5" height="5"><img src="./img/ct_box_left_top.gif" width="5" height="5"></td>-->
					<!--<td background="./img/ct_box_top.gif"></td>-->
					<!--<td width="5"><img src="./img/ct_box_right_top.gif" width="5" height="5"></td>-->
				<!--</tr>-->
				<!--<tr>-->
					<!--<td background="./img/ct_box_left.gif"></td>-->
					<!--<td align="center" bgcolor="#F5F5F5" class="bottom_5">-->
					<!--<table width="99%" border="0" cellspacing="0" cellpadding="0">-->
						<!--<tr>-->
							<!--<td class="main_title_01">카카오톡 상담</td>-->
						<!--</tr>-->
					<!--</table>-->
					<!--<table width="99%" border="0" cellpadding="0" cellspacing="1" bgcolor="E6E6E6">-->
						<!--<tr>-->
							<!--<td width="40" align="center" class="main_title_02"><input type="checkbox" name="chkall" value="chkall" onclick="fnChkAll(this);" class="check_basic"></td>-->
							<!--&lt;!&ndash;<td width="*" align="center" class="main_title_02">진료과목</td>&ndash;&gt;-->
							<!--<td width="*" align="center" class="main_title_02">이름</td>-->
							<!--<td width="200" align="center" class="main_title_02">전화번호</td>-->
							<!--<td width="*" align="center"class="main_title_02">등록일</td>-->
							<!--<td width="70" align="center" class="main_title_02">상태</td>-->
							<!--<td width="70" align="center" class="main_title_02">지점</td>-->
						<!--</tr>-->
						<!--<? for( $i = 0; $i < $tmp; $i++ ) { ?>-->
						<!--<tr>-->
							<!--<td height="25" align="center" bgcolor="#FFFFFF"><INPUT type="checkbox" name="chk[]" value="<?=$Data[$i]["number"]?>" onClick="fnChkItem(this.form['chkall']);" class="check_basic"></td>-->
							<!--&lt;!&ndash;<td align="center" bgcolor="#FFFFFF" class="table_ct_01"><?=$Data[$i]["field"]?></td>&ndash;&gt;-->
							<!--<td align="center" bgcolor="#FFFFFF" class="table_ct_01"><A HREF="<?=$PHP_SELF?>?act=modify&tNum=<?=$Data[$i]["number"]?>"><?=$Data[$i]["name"]?></A></td>-->
							<!--<td align="center" bgcolor="#FFFFFF" class="table_ct_01"><A HREF="<?=$PHP_SELF?>?act=modify&tNum=<?=$Data[$i]["number"]?>"><?=$Data[$i]["phone"]?></a></td>-->
							<!--&lt;!&ndash; <td align="center" bgcolor="#FFFFFF" class="table_ct_01"><?=$Data[$i]["time"]?></td> &ndash;&gt;-->
							<!--<td align="center" bgcolor="#FFFFFF" class="table_ct_01"><?=substr( $Data[$i]["regdate"], 0, 4 )?>-<?=substr( $Data[$i]["regdate"], 4, 2 )?>-<?=substr( $Data[$i]["regdate"], 6, 2 )?> <?=substr( $Data[$i]["regdate"], 8, 2 )?>:<?=substr( $Data[$i]["regdate"], 10, 2 )?></td>-->
							<!--<td align="center" bgcolor="#FFFFFF" class="table_ct_01"><?=$Data[$i]["status"]?></td>-->
							<!--<td align="center" bgcolor="#FFFFFF" class="table_ct_01"><?=$Data[$i]["division"]?></td>-->

						<!--</tr>-->
						<!--<? } ?>-->
					<!--</table>-->
					<!--&lt;!&ndash; 페이징 시작 &ndash;&gt;-->
					<!--<table width="99%" border="0" cellspacing="0" cellpadding="0">-->
						<!--<tr>-->
							<!--<td height="50" align="center">-->

							<!--</td>-->
						<!--</tr>-->
					<!--</table>&lt;!&ndash; 페이징 끝 &ndash;&gt;-->
					<!--<table width="99%" border="0" cellspacing="0" cellpadding="0">-->
						<!--<tr>-->
							<!--<td height="30" valign="top"></td>-->
							<!--<td align="right" valign="top"> <? /*<a href="./inc/ex_call.php"><img align="absmiddle" src="./img/btn_member_down.gif" border="0"></a> */ ?><img src="./img/btn_del.gif" width="60" height="18" align="absmiddle" style="cursor:pointer;" onClick="fnDelData();"></td>-->
						<!--</tr>-->
					<!--</table></td>-->
					<!--<td background="./img/ct_box_right.gif"></td>-->
				<!--</tr>-->
				<!--<tr>-->
					<!--<td height="5"><img src="./img/ct_box_left_bottom.gif" width="5" height="5"></td>-->
					<!--<td background="./img/ct_box_bottom.gif"></td>-->
					<!--<td><img src="./img/ct_box_right_bottom.gif" width="5" height="5"></td>-->
				<!--</tr>-->
<!--</form>-->
			<!--</table>-->